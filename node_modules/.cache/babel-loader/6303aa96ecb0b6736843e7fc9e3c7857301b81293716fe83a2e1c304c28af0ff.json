{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\expense\\\\src\\\\store\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\n//import jwtDecode from \"jwt-decode\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({\n  token: \"\",\n  isLogged: false,\n  loginHandler: token => {},\n  logout: () => {}\n});\nexport const AuthContextProvider = props => {\n  _s();\n  const initialToken = localStorage.getItem(\"token\");\n  const [token, setToken] = useState(initialToken);\n  //const [tokenExpiration, setTokenExpiration] = useState(null);\n  const history = useHistory(\"\");\n  const isLogged = !!token;\n  const loginHandler = token => {\n    setToken(token);\n    localStorage.setItem(\"token\", token);\n    //const decodedToken = jwtDecode(token);\n    //setTokenExpiration(decodedToken.exp * 1000); // Convert seconds to milliseconds\n  };\n\n  const logout = () => {\n    setToken(\"\");\n    //setTokenExpiration(null);\n    localStorage.removeItem(\"token\");\n    history.replace(\"/home\");\n  };\n\n  // useEffect(() => {\n  // if (tokenExpiration) {\n  // const currentTime = new Date().getTime();\n  //if (currentTime > tokenExpiration) {\n  //  logout();\n  // }\n  // }\n  // }, [tokenExpiration]);\n\n  const contextValue = {\n    token: token,\n    isLogged: isLogged,\n    login: loginHandler,\n    logout: logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthContextProvider, \"YBJf0QVwIi2PPPspF1aL2gOmvU4=\", false, function () {\n  return [useHistory];\n});\n_c = AuthContextProvider;\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useHistory","jsxDEV","_jsxDEV","AuthContext","token","isLogged","loginHandler","logout","AuthContextProvider","props","_s","initialToken","localStorage","getItem","setToken","history","setItem","removeItem","replace","contextValue","login","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/hp/expense/src/store/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\n//import jwtDecode from \"jwt-decode\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst AuthContext = createContext({\r\n  token: \"\",\r\n  isLogged: false,\r\n  loginHandler: (token) => {},\r\n  logout: () => {},\r\n});\r\n\r\nexport const AuthContextProvider = (props) => {\r\n  const initialToken = localStorage.getItem(\"token\");\r\n  const [token, setToken] = useState(initialToken);\r\n  //const [tokenExpiration, setTokenExpiration] = useState(null);\r\n  const history = useHistory(\"\");\r\n\r\n  const isLogged = !!token;\r\n\r\n  const loginHandler = (token) => {\r\n    setToken(token);\r\n    localStorage.setItem(\"token\", token);\r\n    //const decodedToken = jwtDecode(token);\r\n    //setTokenExpiration(decodedToken.exp * 1000); // Convert seconds to milliseconds\r\n  };\r\n\r\n  const logout = () => {\r\n    setToken(\"\");\r\n    //setTokenExpiration(null);\r\n    localStorage.removeItem(\"token\");\r\n    history.replace(\"/home\");\r\n  };\r\n\r\n  // useEffect(() => {\r\n  // if (tokenExpiration) {\r\n  // const currentTime = new Date().getTime();\r\n  //if (currentTime > tokenExpiration) {\r\n  //  logout();\r\n  // }\r\n  // }\r\n  // }, [tokenExpiration]);\r\n\r\n  const contextValue = {\r\n    token: token,\r\n    isLogged: isLogged,\r\n    login: loginHandler,\r\n    logout: logout,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={contextValue}>\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE;AACA,SAASC,UAAU,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,WAAW,gBAAGN,aAAa,CAAC;EAChCO,KAAK,EAAE,EAAE;EACTC,QAAQ,EAAE,KAAK;EACfC,YAAY,EAAGF,KAAK,IAAK,CAAC,CAAC;EAC3BG,MAAM,EAAEA,CAAA,KAAM,CAAC;AACjB,CAAC,CAAC;AAEF,OAAO,MAAMC,mBAAmB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EAC5C,MAAMC,YAAY,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAClD,MAAM,CAACT,KAAK,EAAEU,QAAQ,CAAC,GAAGhB,QAAQ,CAACa,YAAY,CAAC;EAChD;EACA,MAAMI,OAAO,GAAGf,UAAU,CAAC,EAAE,CAAC;EAE9B,MAAMK,QAAQ,GAAG,CAAC,CAACD,KAAK;EAExB,MAAME,YAAY,GAAIF,KAAK,IAAK;IAC9BU,QAAQ,CAACV,KAAK,CAAC;IACfQ,YAAY,CAACI,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;IACpC;IACA;EACF,CAAC;;EAED,MAAMG,MAAM,GAAGA,CAAA,KAAM;IACnBO,QAAQ,CAAC,EAAE,CAAC;IACZ;IACAF,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;IAChCF,OAAO,CAACG,OAAO,CAAC,OAAO,CAAC;EAC1B,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMC,YAAY,GAAG;IACnBf,KAAK,EAAEA,KAAK;IACZC,QAAQ,EAAEA,QAAQ;IAClBe,KAAK,EAAEd,YAAY;IACnBC,MAAM,EAAEA;EACV,CAAC;EAED,oBACEL,OAAA,CAACC,WAAW,CAACkB,QAAQ;IAACC,KAAK,EAAEH,YAAa;IAAAI,QAAA,EACvCd,KAAK,CAACc;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACK,CAAC;AAE3B,CAAC;AAACjB,EAAA,CA3CWF,mBAAmB;EAAA,QAIdR,UAAU;AAAA;AAAA4B,EAAA,GAJfpB,mBAAmB;AA6ChC,eAAeL,WAAW;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}